"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class notimanager {
    constructor() {
        this.list = [];
        try {
            var temp = wx.getStorageSync("notilist");
            if (!temp) {
                console.log("不存在旧的通知消息");
            }
            else {
                console.log("存在旧的通知消息");
                this.list = temp;
            }
        }
        catch (e) {
            console.log("不存在旧的通知消息");
        }
    }
    static getInstance() {
        return notimanager.instance;
    }
    add(noti_new) {
        this.list.unshift(noti_new);
        console.log("现在列表里有" + this.list);
        try {
            wx.setStorageSync("notilist", this.list);
            console.log("储存通知消息");
        }
        catch (e) {
            console.log("储存通知消息失败");
        }
    }
    show() {
        console.log("当前对象为", JSON.stringify(this.list));
    }
    edit(id, key, value) {
        console.log(this.list);
        var need = this.list.filter(device => {
            return device.id != id;
        });
        var old = this.list.filter(device => {
            return device.id == id;
        });
        var edit = old[0];
        edit[key] = value;
        console.log(need);
        console.log("------------");
        console.log(old);
        try {
            wx.setStorageSync("notilist", this.list);
            console.log("储存通知消息");
        }
        catch (e) {
            console.log("储存通知消息失败");
        }
    }
}
exports.notimanager = notimanager;
notimanager.instance = new notimanager();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm5vdGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFXQSxNQUFhLFdBQVc7SUFHdEI7UUFEQSxTQUFJLEdBQWUsRUFBRSxDQUFDO1FBRXBCLElBQUk7WUFDRixJQUFJLElBQUksR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3pDLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQ1QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQzthQUUxQjtpQkFBTTtnQkFDTCxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUN4QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQzthQUNsQjtTQUNGO1FBQUMsT0FBTyxDQUFDLEVBQUU7WUFDVixPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBRTFCO0lBQ0gsQ0FBQztJQUNELE1BQU0sQ0FBQyxXQUFXO1FBQ2hCLE9BQU8sV0FBVyxDQUFDLFFBQVEsQ0FBQztJQUM5QixDQUFDO0lBRUQsR0FBRyxDQUFDLFFBQWM7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDNUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xDLElBQUk7WUFDRixFQUFFLENBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUN2QjtRQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ1YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUN6QjtJQUNILENBQUM7SUFDRCxJQUFJO1FBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBQ0QsSUFBSSxDQUFDLEVBQVUsRUFBRSxHQUFXLEVBQUUsS0FBYTtRQUN6QyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QixJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNuQyxPQUFPLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDO1FBQ3pCLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDbEMsT0FBTyxNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQztRQUNILElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsQixJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO1FBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUM1QixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLElBQUk7WUFDRixFQUFFLENBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUN2QjtRQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ1YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUN6QjtJQUNILENBQUM7O0FBdERILGtDQXVEQztBQXREZ0Isb0JBQVEsR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW50ZXJmYWNlIG5vdGkge1xuICBpbmZvOiBzdHJpbmc7XG4gIGRldmljZV9pZDogc3RyaW5nO1xuICB3YXJuaW5nX3R5cGU6IHN0cmluZztcbiAgd2FybmluZ19pZDogc3RyaW5nO1xuICB3YXJuaW5nX25vdGlfdHlwZTogc3RyaW5nO1xuICBjdXJyZW50X3ZhbHVlOiBzdHJpbmcgfCBhbnk7XG4gIHdhcm5pbmdfbGluZTogc3RyaW5nIHwgYW55O1xuICB0aW1lOiBzdHJpbmcgfCBhbnk7XG59XG5cbmV4cG9ydCBjbGFzcyBub3RpbWFuYWdlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlID0gbmV3IG5vdGltYW5hZ2VyKCk7XG4gIGxpc3Q6IEFycmF5PGFueT4gPSBbXTtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHRlbXAgPSB3eC5nZXRTdG9yYWdlU3luYyhcIm5vdGlsaXN0XCIpO1xuICAgICAgaWYgKCF0ZW1wKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi5LiN5a2Y5Zyo5pen55qE6YCa55+l5raI5oGvXCIpO1xuICAgICAgICAvLyBEbyBzb21ldGhpbmcgd2l0aCByZXR1cm4gdmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi5a2Y5Zyo5pen55qE6YCa55+l5raI5oGvXCIpO1xuICAgICAgICB0aGlzLmxpc3QgPSB0ZW1wO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwi5LiN5a2Y5Zyo5pen55qE6YCa55+l5raI5oGvXCIpO1xuICAgICAgLy8gRG8gc29tZXRoaW5nIHdoZW4gY2F0Y2ggZXJyb3JcbiAgICB9XG4gIH1cbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IG5vdGltYW5hZ2VyIHtcbiAgICByZXR1cm4gbm90aW1hbmFnZXIuaW5zdGFuY2U7XG4gIH1cblxuICBhZGQobm90aV9uZXc6IG5vdGkpIHtcbiAgICB0aGlzLmxpc3QudW5zaGlmdChub3RpX25ldyk7XG4gICAgY29uc29sZS5sb2coXCLnjrDlnKjliJfooajph4zmnIlcIiArIHRoaXMubGlzdCk7XG4gICAgdHJ5IHtcbiAgICAgIHd4LnNldFN0b3JhZ2VTeW5jKFwibm90aWxpc3RcIiwgdGhpcy5saXN0KTtcbiAgICAgIGNvbnNvbGUubG9nKFwi5YKo5a2Y6YCa55+l5raI5oGvXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwi5YKo5a2Y6YCa55+l5raI5oGv5aSx6LSlXCIpO1xuICAgIH1cbiAgfVxuICBzaG93KCkge1xuICAgIGNvbnNvbGUubG9nKFwi5b2T5YmN5a+56LGh5Li6XCIsIEpTT04uc3RyaW5naWZ5KHRoaXMubGlzdCkpO1xuICB9XG4gIGVkaXQoaWQ6IHN0cmluZywga2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3QpO1xuICAgIHZhciBuZWVkID0gdGhpcy5saXN0LmZpbHRlcihkZXZpY2UgPT4ge1xuICAgICAgcmV0dXJuIGRldmljZS5pZCAhPSBpZDtcbiAgICB9KTtcbiAgICB2YXIgb2xkID0gdGhpcy5saXN0LmZpbHRlcihkZXZpY2UgPT4ge1xuICAgICAgcmV0dXJuIGRldmljZS5pZCA9PSBpZDtcbiAgICB9KTtcbiAgICB2YXIgZWRpdCA9IG9sZFswXTtcbiAgICBlZGl0W2tleV0gPSB2YWx1ZTtcbiAgICBjb25zb2xlLmxvZyhuZWVkKTtcbiAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLVwiKTtcbiAgICBjb25zb2xlLmxvZyhvbGQpO1xuICAgIHRyeSB7XG4gICAgICB3eC5zZXRTdG9yYWdlU3luYyhcIm5vdGlsaXN0XCIsIHRoaXMubGlzdCk7XG4gICAgICBjb25zb2xlLmxvZyhcIuWCqOWtmOmAmuefpea2iOaBr1wiKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIuWCqOWtmOmAmuefpea2iOaBr+Wksei0pVwiKTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==